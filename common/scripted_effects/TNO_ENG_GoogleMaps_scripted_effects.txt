################
#GOOGLEMAPS GUI#
################
ENG_GoogleMaps_MonthlyUpdate = { #It's actually a monthly update now for balance reasons - Obsidian
	log = "[GetDateText]: [Root.GetName]: GOOGLEMAPS WEEKLY UPDATE"
	ENG_GoogleMaps_Math = yes
	ENG = {
		clr_country_flag = ENG_HMMLR_RECENT_ACTION
		clr_country_flag = ENG_COLLAB_RECENT_ACTION
		every_owned_state = {
			add_to_variable = { ENG_StateStats_HmmlrSupport = ENG_StateStats_HmmlrSupportTrend }
			ENG_SE_ClampHmmlrSupport = yes
			set_variable = { ENG_StateStats_RecentAction = 0 }
		}
		if = {
			limit = { is_ai = yes }			
			# No way to get the AI to use gun system, so fake it
			set_variable = { ENG.ENG_OFN_Relations = 50 }
			set_variable = { ENG.ENG_Cornwall_Relations = 50 }
			add_political_power = -50		#Medium gun shipment is 30 pp, plus 20 to account for relation boosts
			# No way to get the AI to use google maps system, so fake it
			every_owned_state = {
				set_variable = { THIS.ENG_StateStats_Stability = 95 }
				set_variable = { THIS.ENG_StateStats_AI = random }
				
				if = { #HMMLR
					limit = { ENG = { has_country_flag = ENG_Player_HMMLR } }
					if = {
						limit = {
							OR = {
								AND = {
									check_variable = { THIS.ENG_StateStats_AI < 0.60 } 
									date < 1963.2.2
								}
								date < 1962.7.7 #AI is dumb, should definitely take monthly boost for the first 3-4 boosts
							}
						}
						add_to_variable = { THIS.ENG_StateStats_RawHmmlrSupportTrend = 0.5 }
						ENG_GoogleMaps_Math = yes
					}
					else = {
						add_to_variable = { THIS.ENG_StateStats_HmmlrSupport = 2.5 }
						ENG_SE_ClampHmmlrSupport = yes
					}
					add_to_variable = { ENG.ENG_Hmmlr_Guns = 490 } # Medium gun shipment minus 10
				}
				else = { #Collab
					if = {
						limit = {
							OR = {
								AND = {
									check_variable = { THIS.ENG_StateStats_AI < 0.60 } 
									date < 1963.2.2
								}
								date < 1962.7.7 #AI is dumb, should definitely take monthly boost for the first 3-4 boosts
							}
						}
						add_to_variable = { THIS.ENG_StateStats_RawHmmlrSupportTrend = -0.5 }
						ENG_GoogleMaps_Math = yes
					}
					else = {
						add_to_variable = { THIS.ENG_StateStats_HmmlrSupport = -2.5 }
						ENG_SE_ClampHmmlrSupport = yes
					}
					add_to_variable = { ENG.ENG_Collab_Guns = 490 } # Medium gun shipment minus 10
				}
				
			}
		}
	}
}
ENG_GoogleMaps_Math = {
	log = "[GetDateText]: [Root.GetName]: GOOGLEMAPS MATH"
	ENG = {
		every_owned_state = {
			#set_variable = { ENG_StateStats_StabilityEffect = ENG_StateStats_Stability }
			#multiply_variable = { ENG_StateStats_StabilityEffect = -0.02 } #transforms stability into a range of -2 to 0. 100 maps to -2, 0 maps to 0.
			#add_to_variable = { ENG_StateStats_StabilityEffect = 2 }
			
			
			set_variable = { ENG_StateStats_HmmlrSupportTrend = ENG_StateStats_RawHmmlrSupportTrend }
			#multiply_variable = { ENG_StateStats_HmmlrSupportTrend = ENG_StateStats_StabilityEffect }			
		}
	}
}
ENG_SE_ClampHmmlrSupport = {
	clamp_variable = {
		var = ENG_StateStats_HmmlrSupport
		min = 0
		max = 100
	}
}
ENG_SE_ClampStateStability= {
	clamp_variable = {
		var = ENG_StateStats_Stability
		min = 0
		max = 100
	}
}